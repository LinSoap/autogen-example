# MessageFilterAgent æ™ºèƒ½ä½“æ¶ˆæ¯è¿‡æ»¤ç¤ºä¾‹

**éš¾åº¦ç­‰çº§** ğŸŸ¢ å…¥é—¨

æœ¬ç« èŠ‚ä»‹ç»å¦‚ä½•ä½¿ç”¨ AutoGen çš„ MessageFilterAgent å¯¹å¤šæ™ºèƒ½ä½“æ¶ˆæ¯è¿›è¡Œè¿‡æ»¤å’Œå¤„ç†ï¼Œå®ç°ä¿¡æ¯æå–ä¸ä¸Šä¸‹æ–‡æ§åˆ¶ã€‚

**å‰ç½®çŸ¥è¯†**
- AssistantAgent
- MessageFilterAgent
- RoundRobinGroupChat

## è¿è¡Œæ–¹å¼
```bash
uv run -m examples.agent.message_filter_agent.main
```

## æ¦‚è¿°
æœ¬ç¤ºä¾‹åŒ…å«ä¸¤ä¸ªæ™ºèƒ½ä½“ï¼š`name_agent` è´Ÿè´£æå–ç”¨æˆ·çš„åå­—ï¼Œ`age_agent` è´Ÿè´£æå–ç”¨æˆ·çš„å¹´é¾„ã€‚é€šè¿‡ `MessageFilterAgent` åŒ…è£¹ `age_agent`ï¼Œå®ç°åªåœ¨ `name_agent` å›å¤åæ‰å…è®¸ `age_agent` å¤„ç†æ¶ˆæ¯ï¼Œä¿è¯ä¿¡æ¯æµçš„é¡ºåºå’Œä¸Šä¸‹æ–‡ä¾èµ–ã€‚

## ç³»ç»Ÿæ¶æ„
ç³»ç»ŸåŒ…å«ä¸‰ä¸ªä¸»è¦æ™ºèƒ½ä½“ï¼š

### æ ¸å¿ƒç»„ä»¶
- **name_agent**ï¼šæå–ç”¨æˆ·åå­—çš„æ™ºèƒ½ä½“
- **age_agent**ï¼šæå–ç”¨æˆ·å¹´é¾„çš„æ™ºèƒ½ä½“
- **filter_age_agent**ï¼šå¯¹ `age_agent` è¿›è¡Œæ¶ˆæ¯è¿‡æ»¤çš„æ™ºèƒ½ä½“
- **RoundRobinGroupChat**ï¼šè½®è¯¢å›¢é˜Ÿåä½œï¼Œä¿è¯æ¶ˆæ¯é¡ºåº

### å·¥å…·ç»„ä»¶
- **MessageFilterConfig**ï¼šé…ç½®æ¶ˆæ¯è¿‡æ»¤è§„åˆ™
- **PerSourceFilter**ï¼šæŒ‡å®šè¿‡æ»¤æ¥æºå’Œæ•°é‡

## å·¥ä½œæµç¨‹
1. ç”¨æˆ·è¾“å…¥ï¼šâ€œæˆ‘å«å¼ ä¼Ÿï¼Œä»Šå¹´18å²â€
2. `name_agent` æå–åå­—ï¼Œè¾“å‡ºï¼šâ€œå¼ ä¼Ÿâ€
3. `filter_age_agent` åªåœ¨ `name_agent` å›å¤åå¤„ç†æ¶ˆæ¯ï¼Œè°ƒç”¨ `age_agent` æå–å¹´é¾„
4. `age_agent` ç”±äºåªæ”¶åˆ°åå­—ï¼Œæ— æ³•æå–å¹´é¾„ï¼Œè¾“å‡ºæç¤ºä¿¡æ¯

## æ ¸å¿ƒç»„ä»¶è¯¦è§£

### MessageFilterAgent çš„ä½œç”¨
`MessageFilterAgent` ç”¨äºå¯¹åŒ…è£¹çš„æ™ºèƒ½ä½“è¿›è¡Œæ¶ˆæ¯è¿‡æ»¤ï¼Œåªå…è®¸ç‰¹å®šæ¥æºå’Œæ•°é‡çš„æ¶ˆæ¯è¢«å¤„ç†ï¼Œé€‚åˆå¤šæ™ºèƒ½ä½“åä½œåœºæ™¯ä¸‹çš„ä¿¡æ¯æµæ§åˆ¶ã€‚

### å…³é”®å‚æ•°è¯´æ˜
- **per_source**ï¼šæŒ‡å®šåªå¤„ç†æ¥è‡ª `name_agent` çš„æœ€åä¸€æ¡æ¶ˆæ¯
- **termination_condition**ï¼šå›¢é˜Ÿç»ˆæ­¢æ¡ä»¶ï¼Œç¡®ä¿æµç¨‹ä¸ä¼šæ­»å¾ªç¯

### å›¢é˜Ÿåä½œæœºåˆ¶
ç³»ç»Ÿé‡‡ç”¨ `RoundRobinGroupChat`ï¼Œæ™ºèƒ½ä½“è½®æµå¤„ç†æ¶ˆæ¯ï¼Œä¿è¯ä¸Šä¸‹æ–‡ä¸€è‡´æ€§ã€‚

## æ‰§è¡Œé€»è¾‘
```
ç”¨æˆ·è¾“å…¥ â†’ name_agent æå–åå­— â†’ filter_age_agent è¿‡æ»¤å¹¶è°ƒç”¨ age_agent â†’ age_agent è¾“å‡ºç»“æœ
```

- **ç¬¬ä¸€æ­¥**ï¼šç”¨æˆ·è¾“å…¥ä¸ªäººä¿¡æ¯
- **ç¬¬äºŒæ­¥**ï¼šname_agent æå–åå­—
- **ç¬¬ä¸‰æ­¥**ï¼šfilter_age_agent åªå…è®¸ age_agent å¤„ç† name_agent çš„å›å¤
- **ç¬¬å››æ­¥**ï¼šage_agent ç”±äºç¼ºä¹å¹´é¾„ä¿¡æ¯ï¼Œè¾“å‡ºæ— æ³•æå–å¹´é¾„çš„æç¤º

## å…³é”®ç‰¹æ€§

- **æ¶ˆæ¯è¿‡æ»¤**ï¼šåªå¤„ç†ç‰¹å®šæ¥æºçš„æ¶ˆæ¯ï¼Œä¿è¯ä¸Šä¸‹æ–‡ä¾èµ–
- **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šå®ç°ä¿¡æ¯æµé¡ºåºæ§åˆ¶
- **å¯æ‰©å±•æ€§**ï¼šå¯æ ¹æ®éœ€æ±‚æ‰©å±•æ›´å¤šè¿‡æ»¤è§„åˆ™å’Œæ™ºèƒ½ä½“è§’è‰²

---

## ç¤ºä¾‹è¿è¡Œç»“æœ

```text
---------- TextMessage (user) ----------
æˆ‘å«å¼ ä¼Ÿï¼Œä»Šå¹´18å²
---------- ModelClientStreamingChunkEvent (name_agent) ----------
å¼ ä¼Ÿ
[Prompt tokens: 15, Completion tokens: 2]
---------- ModelClientStreamingChunkEvent (age_agent) ----------
å¾ˆæŠ±æ­‰ï¼Œæˆ‘æ— æ³•ä»â€œå¼ ä¼Ÿâ€è¿™ä¸ªåå­—ä¸­æå–å‡ºå¹´é¾„ä¿¡æ¯ã€‚åå­—æœ¬èº«é€šå¸¸ä¸åŒ…å«å¹´é¾„æ•°æ®ã€‚  

å¦‚æœæ‚¨èƒ½æä¾›æ›´å¤šç›¸å…³ä¿¡æ¯ï¼ˆä¾‹å¦‚å‡ºç”Ÿæ—¥æœŸã€èº«ä»½è¯å·ã€æ³¨å†Œä¿¡æ¯ç­‰ï¼‰ï¼Œæˆ‘å¯ä»¥å¸®åŠ©æ‚¨è®¡ç®—æˆ–æå–å¹´é¾„ã€‚  

è¯·æä¾›æ›´å¤šä¸Šä¸‹æ–‡æˆ–æ•°æ®ï¼Œæˆ‘ä¼šå°½åŠ›ååŠ©ï¼
[Prompt tokens: 10, Completion tokens: 63]
```

æœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡æ¶ˆæ¯è¿‡æ»¤æœºåˆ¶å®ç°å¤šæ™ºèƒ½ä½“åä½œä¸ä¿¡æ¯æµæ§åˆ¶ï¼Œä¸ºå¤æ‚ä»»åŠ¡ç¼–æ’æä¾›äº†åŸºç¡€æ¨¡æ¿ã€‚
